# THIS FILE IS AUTOMATICALLY GENERATED, DO NOT EDIT MANUALLY.

from typing import Any, Callable, Iterable, List, Mapping, Optional, Sequence, Set, Union

from html.parser import HTMLParser
from xml.etree.ElementTree import Element


class SimpleNamespace: ...

def decode_html(
        content: bytes,
        charset: Optional[str] = ...,
        fallback_charset: Optional[str] = ...
) -> str: ...

class HTMLNormalizer(HTMLParser):
    omit_tags = ...   # type: Set[str]
    omit_attrs = ...  # type: Set[str]

    def __init__(
            self,
            omit_tags: Optional[Iterable[str]] = ...,
            omit_attrs: Optional[Iterable[str]] = ...
    ) -> None: ...

def html_to_xhtml(
        document: str,
        omit_tags: Optional[Iterable[str]] = ...,
        omit_attrs: Optional[Iterable[str]] = ...
) -> str: ...

class XPath:
    def __init__(self, path: str) -> None: ...

    def __call__(
            self,
            element: Element
    ) -> Union[Sequence[str], Sequence[Element]]: ...

def xpath_etree(
        element: Element,
        path: str
) -> Union[Sequence[str], Sequence[Element]]: ...

class Extractor:
    transform = ...  # type: Optional[Callable[[Union[str, Mapping[str, Any]]], Any]]
    foreach = ...    # type: Optional[XPath]

    def __init__(
            self,
            transform: Optional[Callable[[Union[str, Mapping[str, Any]]], Any]] = ...,
            foreach: Optional[str] = ...
    ) -> None: ...

    def apply(self, element: Element) -> Union[str, Mapping[str, Any]]: ...

    def extract(
            self,
            element: Element,
            transform: Optional[bool] = ...
    ) -> Any: ...

    @staticmethod
    def from_map(item: Mapping[str, Any]) -> Extractor: ...

class Path(Extractor):
    path = ...    # type: XPath
    reduce = ...  # type: Callable[[Sequence[str]], str]

    def __init__(
            self,
            path: str,
            reduce: Optional[Callable[[Sequence[str]], str]] = ...,
            transform: Optional[Callable[[str], Any]] = ...,
            foreach: Optional[str] = ...
    ) -> None: ...

    def apply(self, element: Element) -> str: ...

class Rules(Extractor):
    rules = ...  # type: Sequence[Rule]

    def __init__(
            self,
            rules: Sequence[Rule],
            transform: Optional[Callable[[Mapping[str, Any]], Any]] = ...,
            foreach: Optional[str] = ...
    ) -> None: ...

    def apply(self, element: Element) -> Mapping[str, Any]: ...

class Rule:
    key = ...        # type: Union[str, Extractor]
    extractor = ...  # type: Extractor
    section = ...    # type: Optional[XPath]

    def __init__(
            self,
            key: Union[str, Extractor],
            extractor: Extractor,
            section: Optional[str] = ...
    ) -> None: ...

    @staticmethod
    def from_map(item: Mapping[str, Any]) -> Rule: ...

    def extract(self, element: Element) -> Mapping[str, Any]: ...

def set_root_node(root: Element, path: str) -> Element: ...

def remove_nodes(root: Element, path: str) -> Element: ...

def set_node_attr(
        root: Element,
        path: str,
        name: Union[str, Mapping[str, Any]],
        value: Union[str, Mapping[str, Any]]
) -> Element: ...

def set_node_text(
        root: Element,
        path: str,
        text: Union[str, Mapping[str, Any]]
) -> Element: ...

def build_tree(
        document: str,
        force_html: Optional[bool] = ...
) -> Element: ...

def preprocess(
        root: Element,
        pre: Sequence[Mapping[str, Any]]
) -> Element: ...

def extract(
        element: Element,
        items: Sequence[Mapping[str, Any]]
) -> Mapping[str, Any]: ...

def scrape(
        document: str,
        items: Sequence[Mapping[str, Any]],
        pre: Optional[Sequence[Mapping[str, Any]]] = ...
) -> Mapping[str, Any]: ...

def h2x(source: str) -> None: ...

def scrape_document(
        address: str,
        spec: str,
        content_format: Optional[str] = ...
) -> None: ...

def main(argv: Optional[List[str]] = ...) -> None: ...
